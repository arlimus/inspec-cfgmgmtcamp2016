<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Chef Compliance 1.0</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/beige.css" id="theme">
		<link rel="stylesheet" href="css/present.css">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<link rel="stylesheet" href="css/my.css" media="screen" charset="utf-8">

		<link rel="stylesheet" href="bower_components/highlightjs/styles/rainbow.css" id="theme">
		<script src="bower_components/highlightjs/highlight.pack.min.js" charset="utf-8"></script>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
		<style media="screen">
			.col50 {
				width: 49%;
				display: inline-block;
			}
		</style>
	</head>

	<body>
		<div style="position: fixed; bottom: 1.5rem; right: 1.5rem; color: white; font-size: 1vw; z-index: 10000;" id="timenow">
		</div>
		<script type="text/javascript">
			function toHHMMSS(time) {
		    var hours   = time.getHours();
		    var minutes = time.getMinutes();
		    var seconds = time.getSeconds();

		    if (hours   < 10) {hours   = "0"+hours;}
		    if (minutes < 10) {minutes = "0"+minutes;}
		    if (seconds < 10) {seconds = "0"+seconds;}
		    var time    = hours+':'+minutes+':'+seconds;
		    return time;
			}

			setInterval(function(){
				var time = new Date();
				document.getElementById("timenow").innerHTML = toHHMMSS(time);1
			}, 1000)
		</script>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">

				<section>
					<h1>Chef Compliance 1.0</h1>
				</section>

				<section>
					<h3 style="text-transform: lowercase;">$> whoarewe</h3>
					<div class="col50">
						<p>Christoph Hartmann</p>
						<p style="font-size: smaller">Engineering Manager at Chef</p>
						<ul class="vertical-list" style="font-size: 1.0vw; text-align:center">
							<li><a href="https://twitter.com/chri_hartmann"><i class="icon-twitter"></i>@chri_hartmann</a></li>
							<li><a href="https://github.com/chris-rock"><i class="icon-github-circled"></i>chris-rock</a></li>
							<li><a href="mailto:chartmann@chef.io"><i class="icon-mail-alt"></i>chartmann@chef.io</a></li>
						</ul>
					</div>
					<div class="col50">
						<p>Dominik Richter</p>
						<p style="font-size: smaller">Product Manager at Chef</p>
						<ul class="vertical-list" style="font-size: 1.0vw; text-align:center">
							<li><a href="https://twitter.com/arlimus"><i class="icon-twitter"></i>@arlimus</a></li>
							<li><a href="https://github.com/arlimus"><i class="icon-github-circled"></i>arlimus</a></li>
							<li><a href="mailto:drichter@chef.io"><i class="icon-mail-alt"></i>drichter@chef.io</a></li>
						</ul>
					<div>
				</section>

				<section>
					<h1>Chef Compliance 1.0</h1>
				</section>

				<section>
					<ol>
						<li>Chef Compliance review</li>
						<li class="fragment">Native compliance profiles<div style="font-size: smaller">(SCAP / MSCCM)</div></li>
						<li class="fragment">Chef Server and Client integration</li>
					</ol>
				</section>

				<!-- <section>
					<h1><span class="fragment highlight-red">in</span><span class="fragment highlight-blue">spec</span></h1>
				</section> -->

				<section>
					<h2>What is Chef Compliance?</h2>
				</section>

				<section>
					<h2>Compliance as Code.</h2>
				</section>

				<section>
					<h2>Compliance as Code.</h2>
					<img src="codification.promises.png" alt="Codification promises" style="margin-top: -2rem;"/>
				</section>

				<section>
					<h2>Security meets operations</h2>
					<img src="compliance.users.png" alt="Compliance users"/>
				</section>

				<section data-background="letters.jpg">
				</section>

				<section data-background="cli.output.png">
				</section>

				<section>
					<img src="bring.users.together.png" alt="Unifying language"/>
				</section>

				<section>
					<h3>Documentation</h3>
					<quote>
						SSH supports two different protocol versions. The original version, SSHv1,
						was subject to a number of security issues. Please use SSHv2 instead to
						avoid these.
					</quote>
				</section>

				<section>
					<h3>Scripting tools</h3>
					<pre>
						<code class="hljs bash">
> grep "^Protocol" /etc/ssh/sshd_config | sed 's/Protocol //'
2
						</code>
					</pre>
				</section>

				<section>
					<h3>Compliance language</h3>
					<pre>
						<code class="hljs ruby">
describe sshd_config do
  its('Protocol') { should cmp 2 }
end
						</code>
					</pre>
				</section>

				<section>
					<h2><span class="fragment highlight-red">Compliance</span> and <span class="fragment highlight-blue">integrity</span></h2>
				</section>

				<section>
					<img src="detect-correct.png" alt="Detect and Correct" style="width: 80%;"/>
				</section>

				<section>
					<h1>Moving to 1.0</h1>
				</section>

				<section>
					<span style="text-alignt: left;">
						<h2>Native compliance profiles</h2>
						<h4 class=fragment>and</h4>
						<h2 class=fragment>Chef integration</h2>
					</span>
				</section>

				<section>
					<h1>CIS and SCAP</h1>
				</section>

				<section>
					<h3>Great security benchmarks</h3>
				</section>

				<section>
					<h3>Great coverage</h3>
					<ul class="vertical-list">
						<li>Red Hat Enterprise Linux, Ubuntu, SUSE, Oracle Linux, ...</li>
						<li class=fragment>Microsoft Windows 7, 8, Server 2008, 2012</li>
						<li class=fragment>IBM AIX, HP-UX, VMware ESXi</li>
						<li class=fragment>Oracle MySQL, Apache Tomcat, MS SQL Server, MS IIS</li>
					</ul>
				</section>

				<section>
					<h4>Written in XML</h4>
					<pre style="font-size: small; margin: 0 auto;">
						<code class="hljs xml">
<definition class="compliance" id="oval:org.cisecurity.benchmarks.o_centos_centos:def:1190" version="1">
  <metadata>
    <title>Set SSH Protocol to 2</title>
    <affected family="unix">
      <product>CentOS Linux 6</product>
    </affected>
    <reference ref_id="xccdf_org.cisecurity.benchmarks_rule_6.2.1_Set_SSH_Protocol_to_2" ref_url="http://benchmarks.cisecurity.org" source="xccdf_org.cisecurity.benchmarks_benchmark_1.1.0.1_CIS_CentOS_Linux_6_Benchmark"/>
    <description>Set SSH Protocol to 2</description>
  </metadata>
  <criteria operator="AND">
    <criterion negate="false" test_ref="oval:org.cisecurity.benchmarks.o_centos_centos:tst:10191"/>
  </criteria>
</definition>

<ind:textfilecontent54_test check="all" check_existence="at_least_one_exists" comment="Ensure 'Protocol' sshd config parameter equals 2 (string)" id="oval:org.cisecurity.benchmarks.o_centos_centos:tst:10191" version="1">
  <ind:object object_ref="oval:org.cisecurity.benchmarks.o_centos_centos:obj:10193"/>
  <ind:state state_ref="oval:org.cisecurity.benchmarks.o_centos_centos:ste:10084"/>
</ind:textfilecontent54_test>

<ind:textfilecontent54_object comment="Ensure 'Protocol' sshd config parameter equals 2 (string)" id="oval:org.cisecurity.benchmarks.o_centos_centos:obj:10193" version="1">
  <ind:filepath>/etc/ssh/sshd_config</ind:filepath>
  <ind:pattern operation="pattern match">^\s*Protocol\s+(\S+)\s*(?:#.*)?$</ind:pattern>
  <ind:instance datatype="int" operation="equals">1</ind:instance>
</ind:textfilecontent54_object>

<ind:textfilecontent54_state comment="Ensure 'Protocol' sshd config parameter equals 2 (string)" id="oval:org.cisecurity.benchmarks.o_centos_centos:ste:10084" version="1">
  <ind:subexpression datatype="string" operation="equals" var_ref="oval:org.cisecurity.benchmarks.o_centos_centos:var:1190"/>
</ind:textfilecontent54_state>
						</code>
					</pre>
					<span class="copyright">Source and Copyright: Center for Internet Security</span>
				</section>

				<section>
					<h4>Converted to InSpec</h4>
					<pre style="margin: 0 auto;">
						<code class="hljs ruby">
control "xccdf_org.cisecurity.benchmarks_rule_6.2.1_Set_SSH_Protocol_to_2" do
  title "Set SSH Protocol to 2"
  desc  "SSH supports two different and incompatible protocols: SSH1 and SSH2. SSH1 was the original protocol and was subject to security issues. SSH2 is more advanced and secure."
  impact 1.0
  describe file("/etc/ssh/sshd_config") do
    its(:content) { should match /^\s*Protocol\s+(\S+)\s*(?:#.*)?$/ }
  end
  file("/etc/ssh/sshd_config").content.to_s.scan(/^\s*Protocol\s+(\S+)\s*(?:#.*)?$/).flatten.each do |entry|
    describe entry do
      it { should eq "2" }
    end
  end
end

</code>
				</section>

				<section>
					<h4>Native InSpec</h4>
					<pre style="margin: 0 auto;">
						<code class="hljs ruby">
control "xccdf_org.cisecurity.benchmarks_rule_6.2.1_Set_SSH_Protocol_to_2" do
  title "Set SSH Protocol to 2"
  desc  "SSH supports two different and incompatible protocols: SSH1 and SSH2. SSH1 was the original protocol and was subject to security issues. SSH2 is more advanced and secure."
  impact 1.0
  describe sshd_config do
    its('Protocol') { should cmp 2 }
  end
end
						</code>
					</pre>
				</section>

				<section>
					<h3>Automated conversion</h3>
					<pre>
						<code class="hljs bash">
# Verify support for current SCAP syntax
inspec scap coverage profile.tgz

# Convert to native InSpec
inspec scap convert profile.tgz > inspec-tests.rb

# Test a compliance profile
inspec exec profile.tgz
						</code>
					</pre>
				</section>

				<section>
					<h3>Shipped</h3>
					<ul class="vertical-list">
						<li>CentOS 6 and 7</li>
						<li class=fragment>Ubuntu 12.04 and 14.04</li>
					</ul>
				</section>

				<section>
					<h3>Upcoming</h3>
					<ul class="vertical-list">
						<li>More CIS profiles for Linux and Windows</li>
						<li class=fragment>PCI, HIPAA, DISA STIG</li>
					</ul>
				</section>

				<section>
					<h1>MSCCM</h1>
				</section>

				<section>
					<h1>Language improvements</h1>
				</section>

				<section>
					<h3>Kudos to all <a href="https://github.com/chef/inspec/graphs/contributors">contributors</a> !</h3>
				</section>

				<section>
					<h2>Profile specifications</h2>
					<p style="font-size: smaller;">
						Special thanks to Aaron Lippold and Kina Shah
					</p>
				</section>

				<section>
					<pre style="margin: 0 auto;">
						<code class="hljs ruby">
control 'ssh-1' do
  impact 1.0
  title 'Allow only SSH Protocol 2'

  desc 'Only SSH protocol version 2 connections should be permitted.'

  tag 'production','development'
  tag 'ssh','sshd','openssh-server'

  tag cce: 'CCE-27072-8'
  tag disa: 'RHEL-06-000227'

  tag nist: 'AC-3(10).i'
  tag nist: 'IA-5(1)'

						</code>
					</pre>
				</section>

				<section>
					<h1>Compliance and Chef</h1>
				</section>

				<section>
					<h2>Remember when Compliance was released?</h2>
				</section>

				<section data-background="berlin.wall.jpg">
				</section>

				<section>
					<h2>Chef Client as an <span class="fragment highlight-red">agent</span> for <span class="fragment highlight-blue">Compliance</span></h2>
				</section>

				<section>
					<h2>The way forward</h2>
					<ul>
						<li class="fragment">Compliance profiles</li>
						<li class="fragment">Workflow integration</li>
					</ul>
				</section>

				<section>
					<h2>One workflow cycle</h2>
					<img src="compliance.workflow.png" alt="Compliance Workflow"/>
				</section>

				<section>
					<h2>Full workflow</h2>
					<img src="full.workflow.png" alt="Full Workflow"/>
				</section>


				<section>
					<h2>Join InSpec</h2>
					<h1><a href="https://github.com/chef/inspec" target="_blank">
						<i class="icon-github-circled"></i>
					</a></h1>
					<h6><a href="https://github.com/chef/inspec" target="_blank">github.com/chef/inspec</a></h6>
					<h6 style="font-size: 1.2vw"><a href="https://gitter.im/chef/inspec" target="_blank">gitter.im/chef/inspec</a></h6>
				</section>

				<section>
					<h2>Thank you</h2>
					<div style="width: 100%;">
						<div style="width: 47%; display: inline-block;">
							<ul class="vertical-list" style="font-size: 1.0vw; display: block; text-align: center">
								<li><a href="https://twitter.com/chri_hartmann"><i class="icon-twitter"></i>@chri_hartmann</a></li>
								<li><a href="https://github.com/chris-rock"><i class="icon-github-circled"></i>chris-rock</a></li>
								<li><a href="mailto:chartmann@chef.io"><i class="icon-mail-alt"></i>chartmann@chef.io</a></li>
							</ul>
						</div>
						<div style="width: 47%; display: inline-block;">
							<ul class="vertical-list" style="font-size: 1.0vw; display: block; text-align: center">
								<li><a href="https://twitter.com/arlimus"><i class="icon-twitter"></i>@arlimus</a></li>
								<li><a href="https://github.com/arlimus"><i class="icon-github-circled"></i>arlimus</a></li>
								<li><a href="mailto:drichter@chef.io"><i class="icon-mail-alt"></i>drichter@chef.io</a></li>
							</ul>
						</div>
					</div>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'none', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
